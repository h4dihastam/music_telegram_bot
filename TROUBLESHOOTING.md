# ๐ง ุฑุงูููุง ุญู ูุดฺฉูุงุช

ุงู ุฑุงูููุง ูุดฺฉูุงุช ุฑุงุฌ ู ุฑุงูโุญูโูุง ุขูโูุง ุฑุง ูพูุดุด ูโุฏูุฏ.

## ๐ ููุฑุณุช

1. [ูุดฺฉูุงุช ุฒูุงูโุจูุฏ](#ูุดฺฉูุงุช-ุฒูุงูโุจูุฏ)
2. [ูุดฺฉูุงุช ุฏุงูููุฏ](#ูุดฺฉูุงุช-ุฏุงูููุฏ)
3. [ูุดฺฉูุงุช ุฏุชุงุจุณ](#ูุดฺฉูุงุช-ุฏุชุงุจุณ)
4. [ูุดฺฉูุงุช Spotify](#ูุดฺฉูุงุช-spotify)
5. [ูุดฺฉูุงุช Deploy](#ูุดฺฉูุงุช-deploy)
6. [ูุดฺฉูุงุช ฺฉุงูุงู](#ูุดฺฉูุงุช-ฺฉุงูุงู)

---

## โฐ ูุดฺฉูุงุช ุฒูุงูโุจูุฏ

### ูุดฺฉู 1: "ุฒูุงู ุณูุงุฑุด ูุจูู ููโุดู"

**ุนูุช:** ูุฑูุช ุฒูุงู ุงุดุชุจุงู ุงุณุช

**ุฑุงูโุญู:**
```
โ ุฏุฑุณุช: 09:30, 14:45, 8:00
โ ุบูุท: 9:30 AM, 14:45:00, 25:00
```

ูุฑูุช ุจุงุฏ **HH:MM** ุจุงุดู (24 ุณุงุนุชู)

---

### ูุดฺฉู 2: "ุขููฺฏ ุชู ุฒูุงู ุฏุฑุณุช ุงุฑุณุงู ููุดู"

**ฺฺฉโูุณุช:**

1. **Timezone ุฑู ฺฺฉ ฺฉู:**
```bash
# ุฏุฑ .env
DEFAULT_TIMEZONE=Asia/Tehran
```

2. **ูุงฺฏโูุง ุฑู ุจุจู:**
```bash
tail -f bot.log | grep scheduler
```

3. **ูุถุนุช ุฑู ฺฺฉ ฺฉู:**
```
/status ุฏุฑ ุฑุจุงุช ุจุฒู
```

4. **ูุทูุฆู ุดู ุฑุจุงุช running ุจุงุดู:**
```bash
# Local
ps aux | grep python

# Render
ฺฺฉ ฺฉู ฺฉู service "Running" ุจุงุดู
```

---

### ูุดฺฉู 3: "ูฺฏู ุขููฺฏ ูพุฏุง ูุดุฏ ุชู ุฒูุงู ุงุฑุณุงู"

**ุฑุงูโุญู:**

1. **ุงูู ููุฒฺฉ ุชุตุงุฏู ุจฺฏุฑ:**
```
/menu โ ููุฒฺฉ ุชุตุงุฏู ุญุงูุง
```
ุงฺฏู ูููู ุดุฏุ ูุดฺฉู ุงุฒ scheduler ูุณุช.

2. **ุงฺฏู ูููู ูุดุฏ:**
- Spotify credentials ฺฺฉ ฺฉู
- ูุงฺฏโูุง ุฑู ุจุจู
- ฺุงูุฑ ุฑู ุนูุถ ฺฉู

---

## ๐ฅ ูุดฺฉูุงุช ุฏุงูููุฏ

### ูุดฺฉู 4: "ูุงู ุฏุงูููุฏ ููุดู"

**ุฑุงูโุญู:**

1. **FFmpeg ูุตุจ ุจุงุดู:**
```bash
ffmpeg -version
```

ุงฺฏู ุฎุทุง ุฏุงุฏ:
```bash
# Ubuntu/Debian
sudo apt install ffmpeg

# macOS
brew install ffmpeg
```

2. **yt-dlp ุขูพุฏุช ุจุงุดู:**
```bash
pip install -U yt-dlp
```

3. **ูุถุง ฺฉุงู ุฏุงุดุชู ุจุงุด:**
```bash
df -h  # ฺฺฉ ฺฉุฑุฏู ูุถุง
```

---

### ูุดฺฉู 5: "ููุดู ููุท Preview 30 ุซุงูู ูุงุฏ"

**ุนูุช:** SoundCloud ู YouTube ูููู ููุดู

**ุฑุงูโุญู:**

1. **ุงูุชุฑูุช ุฑู ฺฺฉ ฺฉู:**
```bash
ping soundcloud.com
ping youtube.com
```

2. **ุฏุณุช ุชุณุช ฺฉู:**
```bash
yt-dlp "scsearch:The Weeknd Blinding Lights"
```

3. **Proxy ุงุณุชูุงุฏู ฺฉู (ุงฺฏู ููุชุฑู):**

ุฏุฑ `services/downloader.py`:
```python
cmd = [
    'yt-dlp',
    '--proxy', 'socks5://127.0.0.1:1080',  # ุงุถุงูู ฺฉู
    ...
]
```

---

## ๐พ ูุดฺฉูุงุช ุฏุชุงุจุณ

### ูุดฺฉู 6: "ุฏุชุง ุจุนุฏ ุงุฒ restart ูพุงฺฉ ูุดู"

**ุนูุช:** SQLite ุฏุฑ filesystem ูููุช ุฐุฎุฑู ูุดู

**ุฑุงูโุญู ุจุฑุง Render:**

1. **ฺฺฉ ฺฉู ฺฉู Disk ุชูุธู ุดุฏู:**
```yaml
# ุฏุฑ render.yaml
disk:
  name: bot-persistent-data
  mountPath: /app/data
  sizeGB: 1
```

2. **ฺฺฉ ฺฉู DATABASE_URL:**
```env
# ุจุงุฏ ุงู ุจุงุดู:
DATABASE_URL=sqlite:////app/data/music_bot.db

# ูู ุงู:
DATABASE_URL=sqlite:///music_bot.db  โ
```

3. **ุฏุฑ Render Dashboard:**
- ุจุฑู ุจู service
- ุชุจ "Disks" ุฑู ฺฺฉ ฺฉู
- ูุทูุฆู ุดู disk mounted ูุณุช

---

### ูุดฺฉู 7: "Database locked"

**ุฑุงูโุญู:**

1. **ูุงู ุฏุชุงุจุณ ุฑู ูพุงฺฉ ฺฉู ู ุฏูุจุงุฑู ุจุณุงุฒ:**
```bash
rm music_bot.db
python -c "from core.database import init_db; init_db()"
```

2. **ุง ุจู PostgreSQL ุชุบุฑ ุจุฏู:**
```env
# ุจูุชุฑ ุจุฑุง production
DATABASE_URL=postgresql://user:pass@host/db
```

---

## ๐ต ูุดฺฉูุงุช Spotify

### ูุดฺฉู 8: "ุจุฑุง ุจุนุถ ฺุงูุฑูุง ุขููฺฏ ูพุฏุง ููฺฉูู"

**ุฑุงูโุญู:**

1. **Credentials ุฑู ฺฺฉ ฺฉู:**
```bash
# ุชุณุช ฺฉู
python -c "from services.spotify import spotify_service; print(spotify_service.is_available())"
```

2. **ฺุงูุฑ ุฑู ุชุณุช ฺฉู:**
```bash
python services/spotify.py
```

3. **ฺูุฏ ฺุงูุฑ ุงูุชุฎุงุจ ฺฉู:**
- ุจุฌุง ฺฉ ฺุงูุฑ ุฎุงุต (ูุซูุงู persian)
- ฺูุฏ ุชุง ุงูุชุฎุงุจ ฺฉู (ูุซูุงู persian + pop + electronic)

---

### ูุดฺฉู 9: "Spotify API rate limit"

**ุนูุงูุช:** ุฎุทุง 429 Too Many Requests

**ุฑุงูโุญู:**
- ุตุจุฑ ฺฉู 10 ุฏููู
- ุชุนุฏุงุฏ ฺฉุงุฑุจุฑุงู ุฑู ูุญุฏูุฏ ฺฉู
- ุงุฒ ฺูุฏ account Spotify ุงุณุชูุงุฏู ฺฉู

---

## ๐ ูุดฺฉูุงุช Deploy

### ูุดฺฉู 10: "Build failed ุฏุฑ Render"

**ฺฺฉโูุณุช:**

1. **Dockerfile ุฏุฑุณุช ุจุงุดู:**
```bash
# Local ุชุณุช ฺฉู
docker build -t test .
docker run test
```

2. **requirements.txt ฺฉุงูู ุจุงุดู:**
```bash
pip freeze > requirements.txt
```

3. **Port ุฑู ุชูุธู ฺฉู:**
```env
PORT=8080
```

---

### ูุดฺฉู 11: "Health check failed"

**ุฑุงูโุญู:**

1. **ฺฺฉ ฺฉู health server running ุจุงุดู:**

ุฏุฑ `main.py` ุจุงุฏ ุงู ุจุงุดู:
```python
await start_health_server()  # ูุจู ุงุฒ run_polling
```

2. **Render logs ุฑู ุจุจู:**
```
Render Dashboard โ Your Service โ Logs
```

3. **Health endpoint ุฑู ุชุณุช ฺฉู:**
```bash
curl http://your-service.onrender.com/health
```

---

### ูุดฺฉู 12: "Service keeps restarting"

**ุฑุงูโุญู:**

1. **ูุงฺฏโูุง ุฑู ุจุฑุฑุณ ฺฉู:**
```
Render Dashboard โ Logs
```

2. **ูุดฺฉูุงุช ุฑุงุฌ:**
- BOT_TOKEN ุงุดุชุจุงู
- Out of memory
- Port conflict

3. **Free plan ูุญุฏูุฏุช ุฏุงุฑู:**
- ุจุนุฏ ุงุฒ 15 ุฏููู idle ุฎุงููุด ูุดู
- ูุฑ ุจุงุฑ ุจุฏุงุฑ ุดุฏู reboot ูุดู

---

## ๐ข ูุดฺฉูุงุช ฺฉุงูุงู

### ูุดฺฉู 13: "ุฑุจุงุช ููโุชููู ุจู ฺฉุงูุงู ุงุฑุณุงู ฺฉูู"

**ฺฺฉโูุณุช:**

1. **ุฑุจุงุช ุงุฏูู ุจุงุดู:**
```
ุชูุธูุงุช ฺฉุงูุงู โ Administrators โ ุฑุจุงุช ุฑู ุงุถุงูู ฺฉู
```

2. **ุฏุณุชุฑุณ ุงุฑุณุงู ูพุงู ุฏุงุดุชู ุจุงุดู:**
```
โ Post messages
โ Edit messages (ุงุฎุชุงุฑ)
```

3. **ุขุฏ ฺฉุงูุงู ุฏุฑุณุช ุจุงุดู:**
```
โ @my_channel
โ -1001234567890

โ my_channel (ุจุฏูู @)
โ 1234567890 (ุจุฏูู -)
```

---

### ูุดฺฉู 14: "ููโุชููู ุขุฏ ุนุฏุฏ ฺฉุงูุงู ุฑู ูพุฏุง ฺฉูู"

**ุฑุงูโุญู:**

1. **ุงุฒ ุฑุจุงุช @getidsbot ุงุณุชูุงุฏู ฺฉู:**
```
1. ุฑุจุงุช ุฑู ุจู ฺฉุงูุงู ุงุถุงูู ฺฉู
2. ู ูพุงู forward ฺฉู ุจู @getidsbot
3. ุขุฏ ุฑู ฺฉูพ ฺฉู
```

2. **ุง ุงุฒ @userinfobot:**
```
ูููู ฺฉุงุฑ ุจุงูุง
```

---

## ๐ ูุงฺฏโูุง ฺุฌูุฑ ุจุจููุ

### Local:

```bash
# Real-time
tail -f bot.log

# ุขุฎุฑู 100 ุฎุท
tail -100 bot.log

# ููุท ุฎุทุงูุง
grep ERROR bot.log

# ููุท scheduler
grep scheduler bot.log
```

### Render:

```
Dashboard โ Your Service โ Logs ุชุจ
```

### ููุชุฑ ฺฉุฑุฏู ูุงฺฏโูุง:

```bash
# ููุท Spotify
grep spotify bot.log

# ููุท ุฏุงูููุฏ
grep download bot.log

# ููุท ุฎุทุงูุง
grep -i error bot.log
```

---

## ๐ ูููุฒ ุญู ูุดุฏุ

1. **ูุงฺฏ ฺฉุงูู ุฑู ุจูุฑุณุช:**
```bash
tail -500 bot.log > error_log.txt
```

2. **Issue ุจุงุฒ ฺฉู ุฏุฑ GitHub:**
```
ุงุทูุงุนุงุช ูุงุฒู:
- ุชูุถุญ ูุดฺฉู
- ูุงฺฏโูุง ุฎุทุง
- Python version: python --version
- ูุณุฎู ฺฉุชุงุจุฎุงููโูุง: pip freeze
- ูุญุท: Local/Render/Docker
```

3. **ุงุทูุงุนุงุช ุณุณุชู:**
```bash
# OS
uname -a

# Python
python --version

# FFmpeg
ffmpeg -version

# Disk space
df -h
```

---

## ๐ก ูฺฉุงุช ูพุดฺฏุฑ

### โ Do's:

- ููุดู ูุงฺฏโูุง ุฑู ฺฺฉ ฺฉู
- ุงุฒ disk/volume ุงุณุชูุงุฏู ฺฉู
- Credentials ุฑู ุงูู ูฺฏู ุฏุงุฑ
- ฺฉุฏ ุฑู test ฺฉู ูุจู deploy

### โ Don'ts:

- `.env` ุฑู commit ูฺฉู
- SQLite ุจุฏูู volume ุงุณุชูุงุฏู ูฺฉู
- ุชูฺฉูโูุง ุฑู share ูฺฉู
- ุงุฒ rate limit ุจฺฏุฐุฑ

---

**ุขุฎุฑู ุจุฑูุฒุฑุณุงู:** ุฏุณุงูุจุฑ 2024